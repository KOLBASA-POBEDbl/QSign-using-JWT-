function notifyEveryine(t){"Notification"in window?"granted"===Notification.permission?new Notification("The data of "+t+"th user was changed."):"denied"!==Notification.permission&&Notification.requestPermission(function(e){"permission"in Notification||(Notification.permission=e),"granted"===e&&new Notification("The data of "+t+"th user was changed.")}):alert("This browser does not support desktop notification")}var userData={};function disabletor(e){document.getElementById("changeFirstName").disabled=e,document.getElementById("changeLastName").disabled=e,document.getElementById("changeEmail").disabled=e,document.getElementById("changePhone").disabled=e,document.getElementById("changePassword").disabled=e,document.getElementById("changePasswordCheck").disabled=e,document.getElementById("sendChanges").disabled=e}function searchUser(){var e=document.getElementById("search").value;e&&/^[0-9]+$/.test(e)?(userData.userID=e,$.get("/api/users/"+userData.userID,function(e){document.getElementById("greetinForm").style.display="none",document.getElementById("changeUserForm").style.display="flex",document.getElementById("changeButtonsSet").style.display="flex";let t=document.getElementById("changeFirstName"),n=document.getElementById("changeLastName"),a=document.getElementById("changeEmail"),o=document.getElementById("changePhone");t.value=e.first_name,n.value=e.last_name,a.value=e.email,o.value=e.phone,userData.password=e.password})):alert("No. This is not an ID.")}function getPermission(){$.post("/api/users/permission",function(e){e.OK&&(disabletor(!1),alert("Granted!"),document.getElementById("getPermission").disabled=!0)})}function sendChanges(){let e=document.getElementById("changeFirstName"),t=document.getElementById("changeLastName"),n=document.getElementById("changeEmail"),a=document.getElementById("changePhone"),o=document.getElementById("changePassword"),s=document.getElementById("changePasswordCheck");/^[a-zA-Z]+$/.test(e.value)?/^[a-zA-Z]+$/.test(t.value)||""==t.value?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n.value)?/^[0-9]+$/.test(a.value)?o.value==s.value?($.ajax({url:"/api/users/"+userData.userID,type:"PUT",success:e=>{console.log(e)},data:{first_name:e.value,last_name:t.value,email:n.value,phone:a.value,password:s.value||userData.password}}),notifyEveryine(userData.userID),e.value="",t.value="",n.value="",a.value="",o.value="",s.value="",document.getElementById("greetinForm").style.display="flex",document.getElementById("changeUserForm").style.display="none",document.getElementById("changeButtonsSet").style.display="none",disabletor(!0),userData={},document.getElementById("getPermission").disabled=!1):alert("Passwords do not match!"):alert("This is not a phone number!"):alert("Incorrect email!"):alert("Are you sure your last name is "+t+"?"):alert("Incorrect first name!")}function clearingInputs(){document.getElementById("first_name").value="",document.getElementById("last_name").value="",document.getElementById("email").value="",document.getElementById("phone").value="",document.getElementById("password").value="",document.getElementById("passwordCheck").value=""}function switchMode(){let e=document.getElementById("signInForm"),t=document.getElementById("signUpForm"),n=document.getElementById("signIn"),a=document.getElementById("signUp"),o=document.getElementById("switch");"none"==e.style.display?(t.style.display="none",e.style.display="flex",n.style.display="block",a.style.display="none",o.innerText="Go to Sign Up"):(t.style.display="flex",e.style.display="none",n.style.display="none",a.style.display="block",o.innerText="Go to Sign In")}function signUp(){var e=document.getElementById("first_name").value,t=document.getElementById("last_name").value,n=document.getElementById("email").value,a=document.getElementById("phone").value,o=document.getElementById("password").value,s=document.getElementById("passwordCheck").value;/^[a-zA-Z]+$/.test(e)?/^[a-zA-Z]+$/.test(t)||""==t?/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(n)?/^[0-9]+$/.test(a)?""!=o&&""!=s&&o==s?$.post("/api/users",{first_name:e,last_name:t,email:n,phone:a,password:s},function(e){console.log(e),$(location).attr("href","/")}):alert("Passwords do not match!"):alert("This is not a phone number!"):alert("Incorrect email!"):alert("Are you sure your last name is "+t+"?"):alert("Incorrect first name!")}function signIn(){var e=document.getElementById("emailLog").value,t=document.getElementById("passwordLog").value;/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(e)?""!=t?$.post("/api/login",{email:e,password:t},function(e){console.log(e),$(location).attr("href","/")}):alert("Did you forget about password?"):alert("XD\nThis is really your email?")}document.getElementById("signInForm")&&(document.getElementById("signInForm").style.display="none"),document.addEventListener("DOMContentLoaded",()=>{var e=["violet","green","blue","red","orange"],t=Math.floor(Math.random()*e.length);document.getElementsByClassName("ticket")[0].style.backgroundColor=e[t],document.getElementById("logautPlace").style.backgroundColor=e[t]});